(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{450:function(t,e,a){"use strict";a.r(e);var s=a(15),_=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"进阶用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进阶用法"}},[t._v("#")]),t._v(" 进阶用法")]),t._v(" "),e("Adsense",{staticClass:"side-ads",attrs:{"data-ad-client":t.$themeConfig.ads.client,"data-ad-slot":t.$themeConfig.ads.slot,"is-new-ads-code":"yes"}}),t._v(" "),e("h2",{attrs:{id:"hexo-注入代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hexo-注入代码"}},[t._v("#")]),t._v(" Hexo 注入代码")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://hexo.io/zh-cn/api/injector.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hexo 注入器"),e("OutboundLink")],1),t._v("是 Hexo 5 版本自身加入的一项新功能，所以在所有 Hexo 主题都是支持这个功能的。")]),t._v(" "),e("p",[t._v("注入器可以将 HTML 片段注入生成页面的 "),e("code",[t._v("<head>")]),t._v(" 和 "),e("code",[t._v("<body>")]),t._v(" 节点中。")]),t._v(" "),e("p",[t._v("编写注入代码，需要在博客的根目录下创建 "),e("code",[t._v("scripts")]),t._v(" 文件夹，然后在里面任意命名创建一个 js 文件即可。")]),t._v(" "),e("p",[t._v("例如创建一个 "),e("code",[t._v("/blog/scripts/example.js")]),t._v("，内容为：")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("hexo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extend"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("injector"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'body_end'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<script src=\"/jquery.js\"><\/script>'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("上述代码会在生成的页面 "),e("code",[t._v("</body>")]),t._v(" 注入加载 "),e("code",[t._v("jquery.js")]),t._v(" 的代码。")]),t._v(" "),e("p",[e("code",[t._v("register")]),t._v(" 函数可接受三个参数，第一个参数是代码片段注入的位置，接受以下值：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("head_begin")]),t._v(": 注入在 "),e("code",[t._v("<head>")]),t._v(" 之后（默认）")]),t._v(" "),e("li",[e("code",[t._v("head_end")]),t._v(": 注入在 "),e("code",[t._v("</head>")]),t._v(" 之前")]),t._v(" "),e("li",[e("code",[t._v("body_begin")]),t._v(": 注入在 "),e("code",[t._v("<body>")]),t._v(" 之后")]),t._v(" "),e("li",[e("code",[t._v("body_end")]),t._v(": 注入在 "),e("code",[t._v("</body>")]),t._v(" 之前")])]),t._v(" "),e("p",[t._v("第二个参数是注入的片段，可以是字符串，也可以是一个返回值为字符串的函数。")]),t._v(" "),e("p",[t._v("第三个参数是注入的页面类型，接受以下值：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("default")]),t._v(": 注入到每个页面（默认值）")]),t._v(" "),e("li",[e("code",[t._v("home")]),t._v(": 只注入到主页（"),e("code",[t._v("is_home()")]),t._v(" 为 "),e("code",[t._v("true")]),t._v(" 的页面）")]),t._v(" "),e("li",[e("code",[t._v("post")]),t._v(": 只注入到文章页面（"),e("code",[t._v("is_post()")]),t._v(" 为 "),e("code",[t._v("true")]),t._v(" 的页面）")]),t._v(" "),e("li",[e("code",[t._v("page")]),t._v(": 只注入到独立页面（"),e("code",[t._v("is_page()")]),t._v(" 为 "),e("code",[t._v("true")]),t._v(" 的页面）")]),t._v(" "),e("li",[e("code",[t._v("archive")]),t._v(": 只注入到归档页面（"),e("code",[t._v("is_archive()")]),t._v(" 为 "),e("code",[t._v("true")]),t._v(" 的页面）")]),t._v(" "),e("li",[e("code",[t._v("category")]),t._v(": 只注入到分类页面（"),e("code",[t._v("is_category()")]),t._v(" 为 "),e("code",[t._v("true")]),t._v(" 的页面）")]),t._v(" "),e("li",[e("code",[t._v("tag")]),t._v(": 只注入到标签页面（"),e("code",[t._v("is_tag()")]),t._v(" 为 "),e("code",[t._v("true")]),t._v(" 的页面）")]),t._v(" "),e("li",[t._v("或是其他自定义 layout 名称，例如在Fluid 主题中 "),e("code",[t._v("about")]),t._v(" 对应关于页、"),e("code",[t._v("links")]),t._v(" 对应友联页")])]),t._v(" "),e("h2",{attrs:{id:"fluid-注入代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fluid-注入代码"}},[t._v("#")]),t._v(" Fluid 注入代码")]),t._v(" "),e("p",[t._v("Fluid 主题也提供了一套注入代码功能，相较于 Hexo 注入功能更细致更丰富，并且支持注入 "),e("code",[t._v("ejs")]),t._v(" 代码。")]),t._v(" "),e("p",[t._v("如果你想充分修改主题，又不想直接修改源码影响日后更新，本主题提供了代码注入功能，可以将代码无侵入式加入到主题里。")]),t._v(" "),e("p",[t._v("你可以直接注入 HTML 片段，不过建议你了解一下 "),e("a",{attrs:{href:"https://ejs.bootcss.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("EJS 模板引擎"),e("OutboundLink")],1),t._v("，这样你就可以像主题里的 "),e("code",[t._v("ejs")]),t._v(" 文件一样编写自己的组件再注入进去。")]),t._v(" "),e("p",[t._v("进入博客目录下 "),e("code",[t._v("scripts")]),t._v(" 文件夹（如不存在则创建），在里面创建任意名称的 js 文件，在文件中写入如下内容：")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("hexo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extend"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'theme_inject'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("injects")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  injects"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("header"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'source/_inject/test1.ejs'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cache")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  injects"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("footer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("raw")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'<script async src="https://xxxxxx" crossorigin="anonymous"><\/script>\'')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("ul",[e("li",[e("code",[t._v("header")]),t._v(" 和 "),e("code",[t._v("footer")]),t._v(" 是注入点的名称，表示代码注入到页面的什么位置；")]),t._v(" "),e("li",[e("code",[t._v("file")]),t._v(" 方法表示注入的是文件，第一个参数下面介绍，第二个参数则是文件的路径，第三个参数是传入文件的参数（可省略），第四个参数是配置参数（可省略），第五个参数是顺序（可省略）；")]),t._v(" "),e("li",[e("code",[t._v("raw")]),t._v(" 方法表示注入的是原生代码，第一个参数下面介绍，第二个参数则是一句原生的 HTML 语句；")]),t._v(" "),e("li",[e("code",[t._v("default")]),t._v(" 表示注入的键名，可以使用任意键名，同一个注入点下的相同键名会使注入的内容覆盖，而不同键名则会让内容依次排列（默认按执行先后顺序，可通过 "),e("code",[t._v("file")]),t._v(" 第五个参数指定，越小越靠前），这里 default 为主题默认键名，通常会替换掉主题默认的组件；")])]),t._v(" "),e("p",[t._v("主题目前提供的注入点如下：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("注入点名称")]),t._v(" "),e("th",[t._v("注入范围")]),t._v(" "),e("th",[t._v("存在 "),e("code",[t._v("default")]),t._v(" 键")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("head")]),t._v(" "),e("td",[e("code",[t._v("<head>")]),t._v(" 标签中的结尾")]),t._v(" "),e("td",[t._v("无")])]),t._v(" "),e("tr",[e("td",[t._v("header")]),t._v(" "),e("td",[e("code",[t._v("<header>")]),t._v(" 标签中所有内容")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("bodyBegin")]),t._v(" "),e("td",[e("code",[t._v("<body>")]),t._v(" 标签中的开始")]),t._v(" "),e("td",[t._v("无")])]),t._v(" "),e("tr",[e("td",[t._v("bodyEnd")]),t._v(" "),e("td",[e("code",[t._v("<body>")]),t._v(" 标签中的结尾")]),t._v(" "),e("td",[t._v("无")])]),t._v(" "),e("tr",[e("td",[t._v("footer")]),t._v(" "),e("td",[e("code",[t._v("<footer>")]),t._v(" 标签中所有内容")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("postMetaTop")]),t._v(" "),e("td",[t._v("文章页 "),e("code",[t._v("<header>")]),t._v(" 标签中 meta 部分内容")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("postMetaBottom")]),t._v(" "),e("td",[t._v("文章页底部 meta 部分内容")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("postMarkdownBegin")]),t._v(" "),e("td",[e("code",[t._v('<div class="markdown-body">')]),t._v(" 标签中的开始")]),t._v(" "),e("td",[t._v("无")])]),t._v(" "),e("tr",[e("td",[t._v("postMarkdownEnd")]),t._v(" "),e("td",[e("code",[t._v('<div class="markdown-body">')]),t._v(" 标签中的结尾")]),t._v(" "),e("td",[t._v("无")])]),t._v(" "),e("tr",[e("td",[t._v("postLeft")]),t._v(" "),e("td",[t._v("文章页左侧边栏")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("postRight")]),t._v(" "),e("td",[t._v("文章页右侧边栏")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("postCopyright")]),t._v(" "),e("td",[t._v("文章页版权信息")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("postRight")]),t._v(" "),e("td",[t._v("文章页右侧边栏")]),t._v(" "),e("td",[t._v("无")])]),t._v(" "),e("tr",[e("td",[t._v("postComments")]),t._v(" "),e("td",[t._v("文章页评论")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("pageComments")]),t._v(" "),e("td",[t._v("自定义页评论")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("linksComments")]),t._v(" "),e("td",[t._v("友链页评论")]),t._v(" "),e("td",[t._v("有")])])])]),t._v(" "),e("h2",{attrs:{id:"hexo-插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hexo-插件"}},[t._v("#")]),t._v(" Hexo 插件")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("所有插件仅作为推荐，并且不能保证完全与 Fluid 兼容使用（Fluid 开发组会尽力适配，但实际上大部分不兼容是我们无法单方面解决的），请仔细阅读它们的文档，以免造成不良后果。")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/chenzhutian/hexo-all-minifier",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-all-minifier"),e("OutboundLink")],1),t._v(" : 压缩 Hexo 生成的文件")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/rozbo/hexo-abbrlink",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-abbrlink"),e("OutboundLink")],1),t._v(" : 通过 Hex 算法生成永久的文章链接")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/MoePlayer/hexo-tag-dplayer",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-tag-dplayer"),e("OutboundLink")],1),t._v(" : 可以在文章中插入视频 Tag")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/stevenjoezhang/live2d-widget",target:"_blank",rel:"noopener noreferrer"}},[t._v("live2d-widget"),e("OutboundLink")],1),t._v(" : 在网页上加入 Live2D 看板娘")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/hexojs/hexo-generator-feed",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-generator-feed"),e("OutboundLink")],1),t._v(" : 生成 Atom 1.0 or RSS 2.0 feed")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/jaredly/hexo-admin",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-admin"),e("OutboundLink")],1),t._v(" : 为 Hexo 搭建可视化管理页面")]),t._v(" "),e("InArticleAdsense",{attrs:{"data-ad-client":t.$themeConfig.ads.client,"data-ad-slot":t.$themeConfig.ads.inSlot,"is-new-ads-code":"yes"}}),t._v(" "),e("h2",{attrs:{id:"加快网页加载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加快网页加载"}},[t._v("#")]),t._v(" 加快网页加载")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("如果你的域名已备案，可以使用"),e("a",{attrs:{href:"https://s.qiniu.com/N7beiu",target:"_blank",rel:"noopener noreferrer"}},[t._v("七牛云"),e("OutboundLink")],1),t._v("、阿里云、腾讯云等大厂的 OSS 服务并绑定域名，将生成后的 public 目录下全部上传到 OSS，然后你不仅可以无服务器部署博客，加载速度也将无可比拟；")])]),t._v(" "),e("li",[e("p",[t._v("没有备案，也可以通过香港及海外地区的云，或者私有 CDN 等方式进行加速，推荐一份 "),e("a",{attrs:{href:"https://www.julydate.com/post/60859300",target:"_blank",rel:"noopener noreferrer"}},[t._v("CDN 使用指南"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("li",[e("p",[t._v("如果图片是存在 source 目录中，建议搭配 "),e("a",{attrs:{href:"https://github.com/chenzhutian/hexo-all-minifier",target:"_blank",rel:"noopener noreferrer"}},[t._v("hexo-all-minifier"),e("OutboundLink")],1),t._v(" 插件，可自动对图片进行压缩；")])]),t._v(" "),e("li",[e("p",[t._v("如果是存放在外部的图片，建议先使用 "),e("a",{attrs:{href:"https://tinypng.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("tinypng"),e("OutboundLink")],1),t._v(" 进行压缩。")])])])],1)}),[],!1,null,null,null);e.default=_.exports}}]);